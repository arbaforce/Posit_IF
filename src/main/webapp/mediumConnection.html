<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <meta charset="UTF-8">
        <title>Connect to POSIT'IF</title>
        <link type="text/css" rel="stylesheet" href="./css/main.css">
        <script src="//code.jquery.com/jquery-1.12.1.min.js"></script>
    </head>
    <body>
        <header>
            <h1>POSIT'IF</h1>
        </header>
        <main>
            <section class="center_section">
                <h2>Connexion <span>Uniquement pour les m√©diums</span></h2>
                <hr>
                <form>
                    <input id="connect-email" type="email" placeholder="E-mail" class="large_input"><br>
                    <input id="connect-password" type="password" placeholder="Mot de passe" class="large_input"><br>
                    <button type="button" id="btn-connect" class="left_button">Se connecter</button><br>
                </form>
            </section>
        </main>
        <footer>
            <p>&copy; POSIT'IF 2018</p>
        </footer>
        
         <script src="./js/utils.js"></script>
        <script>
            $(function() {
               $('#btn-connect').click(function() {
                    let email = $('#connect-email').val().trim();
                    let password = $('#connect-password').val();
                   
                    if(email && password) {
                        $.ajax({
                            url: './ActionServlet',
                            type: 'POST',
                            data: {
                                action: 'login_medium',
                                email: email,
                                password: password
                            },
                            dataType: 'json'
                        })
                        .done(function(res) {
                            console.log(res);
                            if(res.erreur) {
                                alert(res.erreur);
                            } else {
                                alert('OK');
                                //window.location = "accueilEmploye.html";
                            }
                        });
                    }
                });
            });
        </script>
    </body>
</html>
